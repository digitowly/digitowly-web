---
import Heart from "./Heart.astro";
import TitleGradient from "./TitleGradient.astro";
---

<div id="main-title-container">
  <div
    class="relative z-20 flex w-full flex-col items-center justify-center transition-transform duration-300 ease-out"
    id="main-title-content"
  >
    <span class="flex items-center pb-2 md:pb-5">
      <span class="origin-right scale-75 md:scale-90 lg:scale-100">
        <Heart />
      </span>
      <p
        class="pl-3 text-[2rem] font-bold leading-none text-white md:text-[3rem] lg:text-[4rem]"
      >
        for
      </p>
    </span>
    <span class="flex flex-col sm:flex-row">
      <h1
        class="slide-in-left text-[5rem] font-bold leading-none text-green md:text-[6rem] lg:text-[7.5rem]"
      >
        digital
      </h1>
      <h1
        class="slide-in-right text-[5rem] font-bold leading-none text-white md:text-[6rem] lg:text-[7.5rem]"
      >
        places
      </h1>
    </span>
  </div>
  <div class="absolute top-0 z-10 hidden scale-50 md:flex 2xl:scale-100">
    <TitleGradient />
  </div>
</div>

<style>
  .slide-in-left {
    transform: translateX(0);
    opacity: 1;
    animation: slideLeft 1s;
  }

  .slide-in-right {
    transform: translateX(0);
    opacity: 1;
    animation: slideRight 1s;
  }

  @keyframes slideLeft {
    0% {
      opacity: 0;
      transform: translateX(-200px);
    }
    100% {
      transform: translateX(0);
      opacity: 1;
    }
  }

  @keyframes slideRight {
    0% {
      opacity: 0;
      transform: translateX(200px);
    }
    100% {
      transform: translateX(0);
      opacity: 1;
    }
  }
</style>

<script>
  function handleScroll() {
    const container = document.getElementById("main-title-content");
    if (!container) return;

    const scrollY = window.scrollY;
    const maxScroll = 300;
    const minScale = 0.5;
    const maxScale = 1.0;

    // Calculate scale based on scroll position
    const scrollProgress = Math.min(scrollY / maxScroll, 1);
    const scale = maxScale - scrollProgress * (maxScale - minScale);

    // Apply the scale transform
    container.style.transform = `scale(${scale})`;
  }

  // Add scroll event listener
  window.addEventListener("scroll", handleScroll);

  // Initial call to set correct scale
  handleScroll();
</script>
